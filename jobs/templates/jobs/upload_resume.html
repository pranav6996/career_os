{% extends 'jobs/base.html' %}
{% load static %}

{% block title %}Upload Resume - Career OS{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px; margin-top: 3rem;">
    <div style="text-align: center; margin-bottom: 3rem;">
        <h1>Upload Your Resume</h1>
        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-top: 1rem;">
            Let AI analyze your skills and find matching opportunities
        </p>
    </div>

    <div class="card">
        <form method="post" enctype="multipart/form-data" id="uploadForm">
            {% csrf_token %}

            <div class="form-group">
                <label class="form-label">
                    <i class="bi bi-file-earmark-pdf"></i> Resume File (PDF or DOCX)
                </label>
                <div class="file-upload">
                    <input type="file" name="resume" id="resumeFile" class="file-upload-input" accept=".pdf,.docx"
                        required>
                    <label for="resumeFile" class="file-upload-label" id="fileLabel">
                        <i class="bi bi-cloud-upload" style="font-size: 2rem;"></i>
                        <div>
                            <div style="font-weight: 600; margin-bottom: 0.25rem;">Click to upload or drag and drop
                            </div>
                            <div style="font-size: 0.875rem; color: var(--text-muted);">PDF or DOCX (Max 5MB)</div>
                        </div>
                    </label>
                </div>
                <div id="fileName" style="margin-top: 0.5rem; color: var(--primary); font-weight: 500;"></div>
            </div>

            <div class="form-group">
                <label class="form-label" for="location">
                    <i class="bi bi-geo-alt"></i> Preferred Location
                </label>
                <input type="text" name="location" id="location" class="form-input" value="India"
                    placeholder="Enter location">
            </div>

            <div style="background: var(--bg-secondary); padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                <h4 style="font-size: 1rem; margin-bottom: 1rem; color: var(--text-primary);">
                    <i class="bi bi-info-circle"></i> How it works
                </h4>
                <ol style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary);">
                    <li style="margin-bottom: 0.5rem;">AI extracts keywords and skills from your resume</li>
                    <li style="margin-bottom: 0.5rem;">Searches across 5 job platforms simultaneously</li>
                    <li>Returns matching jobs in under 30 seconds</li>
                </ol>
            </div>

            <button type="submit" class="btn btn-primary" style="width: 100%; font-size: 1.1rem; padding: 1rem;"
                id="submitBtn">
                <i class="bi bi-rocket-takeoff"></i> Find Jobs for Me
            </button>
        </form>
    </div>

    <div class="card"
        style="margin-top: 2rem; text-align: center; background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1));">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1.5rem;">
            <div>
                <div style="font-size: 2rem; margin-bottom: 0.5rem;"><i class="bi bi-shield-check"></i></div>
                <div style="font-weight: 600; color: var(--text-primary);">Secure</div>
                <div style="font-size: 0.875rem; color: var(--text-muted);">Your data is safe</div>
            </div>
            <div>
                <div style="font-size: 2rem; margin-bottom: 0.5rem;"><i class="bi bi-lightning-charge"></i></div>
                <div style="font-weight: 600; color: var(--text-primary);">Fast</div>
                <div style="font-size: 0.875rem; color: var(--text-muted);">Results in seconds</div>
            </div>
            <div>
                <div style="font-size: 2rem; margin-bottom: 0.5rem;"><i class="bi bi-graph-up-arrow"></i></div>
                <div style="font-weight: 600; color: var(--text-primary);">Smart</div>
                <div style="font-size: 0.875rem; color: var(--text-muted);">AI-powered matching</div>
            </div>
        </div>
    </div>
</div>

<script>
    document.getElementById('resumeFile').addEventListener('change', function (e) {
        const fileName = e.target.files[0]?.name;
        if (fileName) {
            document.getElementById('fileName').innerHTML = '<i class="bi bi-file-check"></i> ' + fileName;
            document.getElementById('fileLabel').style.borderColor = 'var(--success)';
        }
    });

    document.getElementById('uploadForm').addEventListener('submit', function (e) {
        const btn = document.getElementById('submitBtn');
        btn.innerHTML = '<span class="loading-spinner"></span> Processing...';
        btn.disabled = true;
    });
</script>
{% endblock %}